<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="icon" type="web-icon" href="/images/Logo.png">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../css/components/cards.css">
    <link rel="stylesheet" href="../css/components/buttons.css">
    <link rel="stylesheet" href="../css/components/forms.css">
    <link rel="stylesheet" href="../css/pages/minha_colecao.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header_logged :: logado}"></div>

    <main class="colecao-container">

        <div class="left-container">
            <section class="colecao-info">
                <h1 id="title-colecao"></h1>
                <p id="description"></p>
                <small id="total-items"> Action Figures</small>
                <hr class=divider>
            </section>

            <section class="card-grid" id="collection-grid-container">
                <div class="figure-card-placeholder"></div>
            </section>
        </div>

        <aside class="aside-edit">
            <div class="user-header">
                <div class="user-avatar">
                    <img class="profile-icon" src="../icons/Profile-icon.png" alt="Descrição da imagem">
                </div>
                <span class="menu-dots">⋮</span>
            </div>

            <div class="aside-buttons">
                <button id="btn-edit" onclick="goToEditPage()">Editar Coleção</button>
                <small class="update-date">Ultima modificação: **/**/**</small>
                <button id="btn-delete" onlclick="deleteCollection()">Excluir Coleção</button>
            </div>
        </aside>
    </main>
<div th:replace="~{fragments/footer :: rodape}"></div>

    <script>
        // BACK-END: Função para pegar o ID da coleção da URL
function getCollectionId() {
    const params = new URLSearchParams(window.location.search);
    return params.get('id');
}

// Redireciona para a página de edição (levando o ID)
function goToEditPage() {
    const id = getCollectionId();
    // BACK-END: Certifique-se que o nome do arquivo da página anterior seja este
    window.location.href = `criando-uma-colecao.html?id=${id}`;
}

// Função para excluir a coleção
async function deleteCollection() {
    const id = getCollectionId();
    
    if (confirm("Tem certeza que deseja excluir esta coleção? Esta ação não pode ser desfeita.")) {
        // BACK-END: DELETE /api/collections/:id
        console.log("Chamando banco para excluir coleção ID:", id);
        
        /*
        try {
            const response = await fetch(`${API_BASE_URL}/collections/${id}`, {
                method: 'DELETE'
            });
            if (response.ok) {
                alert("Coleção excluída!");
                window.location.href = "home.html"; // Redireciona após excluir
            }
        } catch (error) {
            console.error("Erro ao excluir coleção:", error);
        }
        */
    }
}

// BACK-END: Função para carregar os dados iniciais
async function loadCollectionDetails() {
    const id = getCollectionId();
    // 1. Buscar dados da coleção (Nome, Descrição, Data)
    // 2. Buscar itens da coleção (Action Figures)
    // 3. Preencher o ID 'figures-container' com os cards reais
}

document.addEventListener('DOMContentLoaded', loadCollectionDetails);
    </script>
</body>
</html>