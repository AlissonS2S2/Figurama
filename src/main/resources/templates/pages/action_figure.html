<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes Action Figure</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/components/cards.css}">
    <link rel="stylesheet" th:href="@{/css/components/buttons.css}">
    <link rel="stylesheet" th:href="@{/css/components/forms.css}">
    <link rel="stylesheet" th:href="@{/css/pages/action_figure.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body>
    <div th:replace="~{fragments/header_logged :: logado}"></div>

    <main class="figure-page">
        <section class="figure-container">
            <div class="figure-image-box">
                <div class="image-placeholder">
                    <img id="main-figure-img" src="uploads/Vampira-X-men-97.jpg" alt="Vampira-X-men-97">
                </div>
                <button class="btn-add">Adicionar</button>
            </div>

            <div class="figure-info">
                <div class="info-header">
                    <h1 id="figure-name"></h1>
                    <div class="release-date">
                        Lançada em <span id="figure-date"></span>
                    </div>
                </div>

                <p class="figure-subtitle">de franquia <span id="franchise-name"></span></p>

                <hr class="info-divider">

                <p class="description" id="figure-description"></p>

                <hr class="info-divider">

                <div class="category-area">
                    <p>Categorias</p>
                    <div class="tags-container" id="category-tags">

                    </div>
                </div>
            </div>
        </section>

        <section class="section-block">
            <p class="section-title">Da mesma franquia</p>
            <hr class="section-divider">
            <div class="cards-grid-row" id="franchise-figures-grid">
            
            </div>
        </section>

        <section class="section-block">
            <p class="section-title">Figuras relacionadas</p>
            <hr class="section-divider">
            <div class="cards-grid-row" id="related-figures-grid">

            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container-wrapper">
            <nav class="footer-nav">
                <a href="#">Sobre</a>
                <a href="#">Contato</a>
                <a href="#">Ajuda</a>
                <a href="#">Termos</a>
            </nav>

            <div class="footer-copy">
                <span>© Figurama. Projeto integrador</span>
            </div>

            <div class="footer-social">
            <!-- BACK-END: Ícones de redes sociais -->
                <a href="#"><img src="../icons/Instagram-icon.png" alt="Instagram"></a>
                <a href="#"><img src="../icons/Youtube-Icon.png" alt="Youtube"></a>
                <a href="#"><img src="../icons/X-Icon.png" alt="X"></a>
                <a href="#"><img src="../icons/Discord-Icon.png" alt="Discord"></a>
            </div>
        </div>
    </footer>

    <script>
        // BACK-END: URL base da API
const API_URL = 'http://localhost:3000/api';

// Pega o ID da Figure pela URL (ex: detalhe.html?id=123)
function getFigureId() {
    return new URLSearchParams(window.location.search).get('id');
}

// BACK-END: Função para buscar detalhes da Action Figure principal
async function loadFigureDetails() {
    const id = getFigureId();
    // fetch(`${API_URL}/figures/${id}`) ...
}

// BACK-END: Função para carregar as listas (Mesma Franquia e Relacionadas)
async function loadRelatedLists() {
    const id = getFigureId();
    
    // 1. Buscar figuras da mesma franquia (Limite 5)
    // 2. Buscar figuras relacionadas por categoria (Limite 5)
    
    // Exemplo de como renderizar um card em qualquer uma das listas:
    renderCardInList('franchise-figures-grid', {nome: "Exemplo", imagem_url: ""});
}

function renderCardInList(containerId, figure) {
    const container = document.getElementById(containerId);
    
    // Seguindo seu modelo de card original
    const card = document.createElement('div');
    card.className = 'figure-card'; // Estilo definido no seu primeiro arquivo de modelo
    
    // Se não houver dados, o placeholder cinza pode ser usado:
    if(!figure.imagem_url) {
        card.className = 'card-placeholder-item';
    } else {
        card.innerHTML = `
            <div class="figure-card-image">
                <img src="${figure.imagem_url}" alt="${figure.nome}">
            </div>
            <div class="figure-card-info">
                <p class="figure-card-name">${figure.nome}</p>
            </div>
        `;
    }
    
    container.appendChild(card);
}

// BACK-END: Função para renderizar as tags de categoria
function renderTags(categories) {
    const container = document.getElementById('category-tags');
    categories.forEach(cat => {
        const span = document.createElement('span');
        span.className = 'tag';
        span.textContent = cat;
        container.appendChild(span);
    });
}

document.addEventListener('DOMContentLoaded', () => {
    loadFigureDetails();
    loadRelatedLists();
});
    </script>
</body>
</html>